<VirtualHost *:80>
    ServerName ktapood.ee
    ServerAdmin timo.triisa@tptlive.ee

    # DocumentRoot only used for fallback (optional)
    DocumentRoot "C:\Users\timo.triisa\Downloads\Apache24\html"
	
	#SSLEngine on
    #SSLCertificateFile "C:\Users\timo.triisa\Downloads\Apache24\certs\ktapood.ee\cert.pem"
    #SSLCertificateKeyFile "C:\Users\timo.triisa\Downloads\Apache24\certs\ktapood.ee\privkey.pem"

    # Enable proxy for the app
    ProxyPreserveHost On
    ProxyRequests Off

	ProxyPass        "/api/products"  "balancer://productcluster/products"
    ProxyPassReverse "/api/products"  "balancer://productcluster/products"
	ProxyPass        "/api/products/"  "balancer://productcluster/products"
    ProxyPassReverse "/api/products/"  "balancer://productcluster/products"

	ProxyPass        "/api/orders"  "balancer://ordercluster/orders"
    ProxyPassReverse "/api/orders"  "balancer://ordercluster/orders"
	ProxyPass        "/api/orders/"  "balancer://ordercluster/orders"
    ProxyPassReverse "/api/orders/"  "balancer://ordercluster/orders"
	
	ProxyPass        "/api/auth/login"  "balancer://authcluster/api/auth/login"
    ProxyPassReverse "/api/auth/login"  "balancer://authcluster/api/auth/login"
	ProxyPass        "/api/auth/register"  "balancer://authcluster/api/auth/register"
    ProxyPassReverse "/api/auth/register"  "balancer://authcluster/api/auth/register"

	ProxyPass        "/api/reviews"   "balancer://reviewcluster/reviews"
    ProxyPassReverse "/api/reviews"   "balancer://reviewcluster/reviews"
	ProxyPass        "/api/reviews/"   "balancer://reviewcluster/reviews"
    ProxyPassReverse "/api/reviews/"   "balancer://reviewcluster/reviews"

    # -------------------------------------------------
    # Everything else â†’ main cluster (optional)
    # -------------------------------------------------
    ProxyPass        "/"  "balancer://appcluster/"
    ProxyPassReverse "/"  "balancer://appcluster/"

    ErrorLog ${APACHE_LOG_DIR}/app-error.log
    CustomLog ${APACHE_LOG_DIR}/app-access.log combined
</VirtualHost>
